(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1596:()=>{},3454:(e,t,l)=>{"use strict";l.d(t,{default:()=>y});var a=l(5155),s=l(2115),n=l(9918),o=l(8236),i=l(808);let c=["checkbox","color","collection","collection_list","image_picker","link_list","number","page","paragraph","product","product_list","radio","range","richtext","select","text","textarea","video_url","font_picker","blog","url","header"].sort(),d=[{type:"header",options:["content"]},{type:"paragraph",options:["content"]},{type:"text",options:["id","label","info","placeholder","default"]},{type:"color",options:["id","label","info","default"]},{type:"font_picker",options:["id","label","info","default"]},{type:"collection",options:["id","label","info"]},{type:"product",options:["id","label","info"]},{type:"product_list",options:["id","label","info"]},{type:"collection_list",options:["id","label","info"]},{type:"blog",options:["id","label","info"]},{type:"page",options:["id","label","info"]},{type:"link_list",options:["id","label","info"]},{type:"url",options:["id","label","info"]},{type:"video_url",options:["id","label","accept","placeholder","info","default"]},{type:"richtext",options:["id","label","info","default"]},{type:"checkbox",options:["id","label","info","default"]},{type:"range",options:["id","label","min","max","step","unit","info","default"]},{type:"textarea",options:["id","label","info","placeholder","default"]},{type:"number",options:["id","label","info","placeholder","default"]},{type:"select",options:["id","label","info","options","default"]},{type:"radio",options:["id","label","info","options","default"]},{type:"image_picker",options:["id","label","info"]}],p=(e,t,l)=>{t("");let a=e.match(/{%\s*schema\s*%}([\s\S]*?){%\s*endschema\s*%}/);if(a){let e=a[1];try{let t=JSON.parse(e);l(t)}catch(e){t("Error parsing schema content.")}}else t("No {% schema %} found in the pasted code.")},r=e=>{e(e=>({...e,settings:[...e.settings,{id:"",type:"text",label:"",default:"",info:""}]}))},u=(e,t)=>{t(t=>({...t,settings:t.settings.filter((t,l)=>l!==e)}))},h=(e,t,l)=>{l(t=>({...t,[e]:!t[e]}))};l(1596);var f=l(8250),m=l(1609);function g(e){var t;let{setting:l,index:n,schema:o,setSchema:p,collapsed:r,setCollapsed:g}=e,[x,y]=(0,s.useState)(!1),[b,v]=(0,s.useState)(l.id||""),[j,N]=(0,s.useState)(l.default||"#000000"),[C,S]=(0,s.useState)(l.default||""),[k,_]=(0,s.useState)(l.info||""),[E,O]=(0,s.useState)(l.options||[{value:"",label:""}]),I=(e,t)=>{let l=[...o.settings],[a]=l.splice(e,1);l.splice(t,0,a),p({...o,settings:l})},[{isDragging:D},w]=(0,f.i)({type:"SETTING",item:{index:n},collect:e=>({isDragging:e.isDragging()})}),[,A]=(0,m.H)({accept:"SETTING",hover:e=>{e.index!==n&&(I(e.index,n),e.index=n)}});(0,s.useEffect)(()=>{v(l.id||""),N(l.default||"#000000"),S(l.default||""),_(l.info||""),O(l.options||[{value:"",label:""}])},[l]);let P=(e,t)=>{let l=[...o.settings];l[n]={...l[n],[e]:t},p({...o,settings:l})},J=()=>{P("id",b),"color"===l.type?P("default",j):"checkbox"!==l.type&&P("default",C),"checkbox"===l.type&&P("info",k),"select"===l.type&&P("options",E),y(!1);let e={...l};""===k.trim()&&delete e.info;let t=[...o.settings];t[n]=e,p({...o,settings:t})},U=e=>{"Enter"===e.key&&J()},B=()=>{O([...E,{value:"",label:""}])},T=e=>{let t=E.filter((t,l)=>l!==e);O(t),p(e=>({...e,settings:e.settings.map(e=>e.id===l.id?{...e,options:t}:e)}))},F=(e,t,a)=>{let s=[...E];s[e]={...s[e],[t]:a},O(s),p(e=>{let t=e.settings.map(e=>e.id===l.id?{...e,options:s}:e);return{...e,settings:t}})};return(0,a.jsxs)("div",{ref:e=>w(A(e)),style:{opacity:D?.5:1},className:"setting-container",children:[(0,a.jsx)("div",{className:"editor-buttons",children:(0,a.jsx)("button",{className:"editor-button editor-button--remove",onClick:()=>u(n,p),children:"X"})}),(0,a.jsxs)("div",{className:"collapsible-header",onClick:()=>h(n,r,g),children:[(0,a.jsx)("h3",{className:"editor-item-title",onClick:e=>{e.stopPropagation(),y(!0)},style:{cursor:"pointer"},children:x?(0,a.jsx)("input",{type:"text",value:l.label,onChange:e=>P("label",e.target.value),onBlur:J,onKeyDown:U,autoFocus:!0,className:"inline-input"}):(0,a.jsx)("span",{children:l.label||"Untitled Setting"})}),(0,a.jsx)("span",{className:"editor-item-collapse",children:r[n]?"Expand":"Collapse"})]}),(0,a.jsxs)("div",{className:"collapsible-content ".concat(r[n]?"collapsed":""),children:[(0,a.jsx)("select",{value:l.type||"",onChange:e=>{let t=e.target.value;P("type",t);let a={id:l.id||"".concat(t,"-setting-").concat(Date.now()),label:l.label||"".concat(t.charAt(0).toUpperCase()+t.slice(1)," Setting"),info:l.info||"",default:"checkbox"!==t&&(l.default||"")},s={type:t,...a};"paragraph"===t||"header"===t?(s.content=l.content||"",delete s.min,delete s.max,delete s.step,delete s.options,Object.keys(a).forEach(e=>{delete s[e]})):"range"===t?(s.min=l.min||0,s.max=l.max||100,s.step=l.step||1,s.unit="px",delete s.content,delete s.options):"select"===t?(s.options=l.options||[{value:"",label:""}],delete s.content,delete s.min,delete s.max,delete s.step):("checkbox"===t&&(s.default=void 0!==l.default&&l.default),delete s.content,delete s.min,delete s.max,delete s.step,delete s.options),p(e=>({...e,settings:e.settings.map((e,t)=>t===n?s:e)}))},className:"input-field",children:c.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),null===(t=d.find(e=>e.type===l.type))||void 0===t?void 0:t.options.map(e=>{let t="".concat(e,"-").concat(l.type,"-").concat(l.id||Date.now());return"content"===e&&("paragraph"===l.type||"header"===l.type)?(0,a.jsx)("input",{type:"text",value:l.content,onChange:e=>P("content",e.target.value),onBlur:J,onKeyDown:U,placeholder:"Content",className:"input-field"},t):"default"===e&&"color"===l.type?(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Xq,{color:j,onChangeComplete:e=>P("default",e.hex),className:"input-field"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>P("default",e.target.value),onBlur:()=>P("default",j),className:"input-field",placeholder:"HEX Color"})]},t):"default"===e&&"checkbox"===l.type?(0,a.jsx)("div",{className:"checkbox-container",children:(0,a.jsx)("label",{children:(0,a.jsx)("input",{type:"checkbox",checked:!!l.default,onChange:e=>P("default",e.target.checked)})})},t):"options"===e&&"select"===l.type||"options"===e&&"radio"===l.type?(0,a.jsxs)("div",{children:[E.map((e,l)=>{let s="".concat(t,"-").concat(l);return(0,a.jsxs)("div",{className:"editor-option-inputs",children:[(0,a.jsx)("input",{type:"text",value:e.value,onChange:e=>F(l,"value",e.target.value),placeholder:"Value",className:"input-field"}),(0,a.jsx)("input",{type:"text",value:e.label,onChange:e=>F(l,"label",e.target.value),placeholder:"Label",className:"input-field"}),(0,a.jsx)("button",{type:"button",className:"remove-option",onClick:()=>T(l),children:"Remove"})]},s)}),(0,a.jsx)("button",{type:"button",className:"add-option",onClick:B,children:"Add Option"})]},t):"min"===e||"max"===e||"step"===e?(0,a.jsx)("input",{type:"number",value:l[e],onChange:t=>P(e,parseInt(t.target.value)),className:"input-field",placeholder:e.charAt(0).toUpperCase()+e.slice(1)},t):"default"===e&&("select"===l.type||"radio"===l.type)?(0,a.jsx)("select",{value:l.default||"",onChange:e=>P("default",e.target.value),className:"input-field",children:E.map((e,l)=>(0,a.jsx)("option",{value:e.value,children:e.label},"".concat(t,"-").concat(l)))},t):"default"===e?(0,a.jsx)("input",{type:"range"===l.type?"number":"text",value:l.default,onChange:e=>P("default","range"===l.type?parseFloat(e.target.value):e.target.value),className:"input-field",placeholder:"Default"},t):"unit"===e?(0,a.jsx)("input",{type:"text",value:l.unit,onChange:e=>P("unit",e.target.value),className:"input-field",placeholder:"Unit",maxLength:3},t):(0,a.jsx)("input",{type:"text",value:l[e],onChange:t=>P(e,t.target.value),onBlur:J,onKeyDown:U,placeholder:e.charAt(0).toUpperCase()+e.slice(1),className:"input-field"},t)})]})]})}function x(e){let{items:t,schema:l,setSchema:s,collapsed:n,setCollapsed:o}=e;return(0,a.jsx)("div",{className:"editor-items",children:t.map((e,t)=>(0,a.jsx)(g,{index:t,setting:e,schema:l,setSchema:s,collapsed:n,setCollapsed:o},"item-".concat(t)))})}function y(){let[e,t]=(0,s.useState)({name:"Custom Section",settings:[]}),[l,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)({}),[f,m]=(0,s.useState)(!0),[g,y]=(0,s.useState)(!1),[b,v]=(0,s.useState)("");return(0,s.useEffect)(()=>{let e=localStorage.getItem("schema"),l=localStorage.getItem("shopifyCode"),a=localStorage.getItem("collapsed");e&&t(JSON.parse(e)),l&&i(l),a&&h(JSON.parse(a)),m(!1)},[]),(0,s.useEffect)(()=>{localStorage.setItem("schema",JSON.stringify(e)),localStorage.setItem("shopifyCode",l),localStorage.setItem("collapsed",JSON.stringify(u))},[e,l,u]),(0,s.useEffect)(()=>{v(JSON.stringify(e,null,2))},[e]),(0,a.jsxs)("div",{className:"editor",children:[(0,a.jsx)("h1",{className:"header",children:"Shopify Section Editor"}),f?(0,a.jsxs)("div",{className:"skeleton-loader",children:[(0,a.jsx)("div",{className:"skeleton-header"}),(0,a.jsx)("div",{className:"skeleton-content"}),(0,a.jsx)("div",{className:"skeleton-footer"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("textarea",{value:l,onChange:e=>i(e.target.value),placeholder:"Paste your Shopify section code here...",className:"input-field"}),(0,a.jsxs)("div",{className:"editor-container",children:[(0,a.jsxs)("div",{className:"editor-settings",children:[(0,a.jsxs)("div",{className:"editor-controls",children:[(0,a.jsx)("button",{className:"paste-code",onClick:()=>p(l,d,t),children:"Paste & Parse Code"}),(0,a.jsx)("button",{onClick:()=>{let t=!g;y(t);let l={};e.settings.forEach((e,a)=>{l[a]=t}),h(l)},children:g?"Uncollapse All":"Collapse All"}),c&&(0,a.jsx)("div",{className:"error-message",children:c}),(0,a.jsx)("button",{className:"add-setting",onClick:()=>r(t),children:"Add Setting"})]}),(0,a.jsx)(n.Q,{backend:o.t2,children:(0,a.jsx)(x,{items:e.settings,schema:e,setSchema:t,collapsed:u,setCollapsed:h})})]}),(0,a.jsx)("div",{className:"json-output",children:(0,a.jsx)("pre",{children:b})})]})]})]})}},5997:(e,t,l)=>{Promise.resolve().then(l.t.bind(l,3063,23)),Promise.resolve().then(l.bind(l,3454)),Promise.resolve().then(l.t.bind(l,8334,23))},8334:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[153,491,441,684,358],()=>t(5997)),_N_E=e.O()}]);